<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">

<select id="getTinfoChart" resultType="map" parameterType="map">
SELECT TO_CHAR(I.TINFO_CITY) "ranktinfoid", COUNT(B.TINFO_ID) "counttinfoid"
FROM TRAVELINFOT I, TRAVELBOARDT B
WHERE I.TINFO_ID = B.TINFO_ID
AND TO_CHAR(B.TRAVEL_DATE, 'YYYY/MM') = #{day}
GROUP BY I.TINFO_CITY
ORDER BY 2 DESC
</select>

<select id="getManageProductList" resultType="product">
		SELECT B.* FROM ( SELECT A.*, ROWNUM RN FROM (
		 SELECT ITEM_ID,
				ITEM_NAME,
				ITEM_PRICE,
				ITEM_EA,
				ITEM_CONTENT,
				ITEM_METHOD,
				ITEM_CATEGORY,
				SELLER_ID,
				ITEM_ORDERDETAIL,
				ITEM_STAR,
				ITEM_PIC,
				TO_CHAR(ITEM_DATE, 'RR/MM/DD') ITEM_DATE,
				ITEM_CONDITION,
				ITEM_LIKE
		FROM ITEMT
		ORDER BY ITEM_ID DESC
		) A ) B WHERE RN BETWEEN #{first} AND #{last}
</select>

<select id="getManageOrderList" resultType="order">
		SELECT  ORDER_ID, 
				ORDER_CONDITION, 
				ORDER_EA,
				ITEM_ID,
				BUYER_ID,
				ORDER_DATE
			FROM ORDERT
	 	    ORDER BY ORDER_DATE DESC
</select>
<select id="getManageOrder" resultType="order">
	SELECT  ORDER_ID, 
			TO_CHAR(ORDER_DATE, 'YYYY/MM/DD') ORDER_DATE,
		   	ORDER_DELIVERY,
		   	ORDER_PRICE,
			ORDER_EA,
			ITEM_DELIVERYNO,
		   	ITEM_METHOD,
			USER_NAME,
			USER_PHONE,
			ORDER_POST,
			ORDER_ADDRESS
	   FROM ORDERT O, USERT U
	  WHERE O.BUYER_ID = U.USER_ID
	  		AND O.ORDER_ID = #{orderId}
</select>

<select id="getManagePartnerList" resultType="partner">
SELECT	PARTNER_ID,
			PARTNER_TITLE,      
			TO_CHAR(PARTNER_DATE, 'YYYY/MM/DD') PARTNER_DATE,    
			USER_ID,    
			TINFO_ID,
			PARTNER_CONDITION
	FROM	PARTNERT
	ORDER BY PARTNER_ID DESC
</select>

<select id="getManageTravelList" resultType="travelBoard">
	SELECT TRAVEL_NO,
			TRAVEL_TITLE,
			TRAVEL_DATE,
			TINFO_ID,
			USER_ID
	FROM TRAVELBOARDT
	ORDER BY TRAVEL_NO DESC
</select>

<select id="getManageNoticeList" resultType="notice">
	SELECT  NOTICE_ID,
			NOTICE_TITLE,
			TO_CHAR(NOTICE_DATE, 'MM/DD') NOTICE_DATE
	  FROM  NOTICET
	  ORDER BY NOTICE_ID DESC
</select>

<select id="getManageQnaList" resultType="qna">
	SELECT  QNA_ID,
			QNA_TITLE,
			QNA_CONTENT,
			TO_CHAR(QNA_DATE, 'MM/DD') QNA_DATE,
			USER_ID,
			QNA_ANSWER
	  FROM  QNAT
	  ORDER BY QNA_ID DESC
</select>
</mapper>